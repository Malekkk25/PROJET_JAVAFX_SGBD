<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="projetsgbd.controllers.GestionUtilisateursController"
            styleClass="root" stylesheets="@style.css">

<top>
    <VBox spacing="0" styleClass="header-container">
        <VBox styleClass="header-box">

            <!-- Top Bar -->
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="top-bar">
                <!-- Logo + Titre -->
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <StackPane styleClass="logo-container">
                        <Label text="ðŸ“¦" styleClass="logo-icon"/>
                    </StackPane>
                    <VBox spacing="2">
                        <Label text="SystÃ¨me de Gestion" styleClass="title-main"/>
                        <Label text="des Livraisons" styleClass="title-sub"/>
                    </VBox>
                </HBox>

                <Pane HBox.hgrow="ALWAYS"/>
            </HBox>

            <Separator styleClass="header-separator"/>

            <!-- Navigation Tabs -->
            <HBox spacing="12" alignment="CENTER_LEFT" styleClass="nav-bar">
               <!-- Onglet Gestion Utilisateurs -->
<HBox fx:id="tabUsers" spacing="10" alignment="CENTER"
      styleClass="nav-tab nav-tab-active"
      onMouseClicked="#versGestionUtilisateurs">
    <Label text="ðŸ‘¥" styleClass="nav-icon"/>
    <Label text="Gestion des Utilisateurs" styleClass="nav-label"/>
</HBox>

<!-- Onglet Gestion Commandes -->
<HBox fx:id="tabCommandes" spacing="10" alignment="CENTER"
      styleClass="nav-tab"
      onMouseClicked="#versGestionCommandes">
    <Label text="ðŸ›’" styleClass="nav-icon"/>
    <Label text="Gestion des Commandes" styleClass="nav-label"/>
</HBox>

<!-- Onglet Gestion Livraisons -->
<HBox fx:id="tabLivraisons" spacing="10" alignment="CENTER"
      styleClass="nav-tab"
      onMouseClicked="#versGestionLivraisons">
    <Label text="ðŸšš" styleClass="nav-icon"/>
    <Label text="Gestion des Livraisons" styleClass="nav-label"/>
</HBox>

            </HBox>

        </VBox>
    </VBox>
</top>


    <!-- ========== MAIN CONTENT ========== -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="main-scroll">
            <VBox spacing="28" styleClass="main-content">

                <!-- ========== FORM CARD ========== -->
                <VBox spacing="22" styleClass="card form-card">
                    
                    <!-- Card Header -->
                    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="card-header">
                        <StackPane styleClass="card-icon-container">
                            <Label text="ðŸ‘¤" styleClass="card-icon"/>
                        </StackPane>
                        <VBox spacing="2">
                            <Label text="Ajouter un Nouvel Utilisateur" styleClass="card-title"/>
                            <Label text="Remplissez les informations pour crÃ©er un nouveau compte" styleClass="card-subtitle"/>
                        </VBox>
                    </HBox>

                    <Separator styleClass="card-separator"/>

                    <!-- Form Grid -->
                    <GridPane hgap="22" vgap="20" styleClass="form-grid">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="33.33"/>
                            <ColumnConstraints percentWidth="33.33"/>
                            <ColumnConstraints percentWidth="33.33"/>
                        </columnConstraints>

                        <!-- Row 1 -->
                        <VBox spacing="10" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="form-field">
                            <HBox spacing="6" alignment="CENTER_LEFT">
                                <Label text="Login" styleClass="field-label"/>
                                <Label text="*" styleClass="field-required"/>
                            </HBox>
                            <TextField fx:id="loginField" 
                                       promptText="ex: djupont"
                                       styleClass="field-input"/>
                        </VBox>

                        <VBox spacing="10" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="form-field">
                            <Label text="Nom" styleClass="field-label"/>
                            <TextField fx:id="nomField"
                                       promptText="Entrez le nom"
                                       styleClass="field-input"/>
                        </VBox>

                        <VBox spacing="10" GridPane.rowIndex="0" GridPane.columnIndex="2" styleClass="form-field">
                            <HBox spacing="6" alignment="CENTER_LEFT">
                                <Label text="TÃ©lÃ©phone" styleClass="field-label"/>
                                <Label text="*" styleClass="field-required"/>
                            </HBox>
                            <TextField fx:id="telField" 
                                       promptText="+216 XX XXX XXX"
                                       styleClass="field-input"/>
                        </VBox>

                        <!-- Row 2 -->
                        <VBox spacing="10" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="form-field">
                            <HBox spacing="6" alignment="CENTER_LEFT">
                                <Label text="Mot de Passe" styleClass="field-label"/>
                                <Label text="*" styleClass="field-required"/>
                            </HBox>
                            <PasswordField fx:id="motPasseField"
                                          promptText="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                          styleClass="field-input"/>
                        </VBox>

                        <VBox spacing="10" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-field">
                            <Label text="PrÃ©nom" styleClass="field-label"/>
                            <TextField fx:id="prenomField"
                                       promptText="Entrez le prÃ©nom"
                                       styleClass="field-input"/>
                        </VBox>

                        <VBox spacing="10" GridPane.rowIndex="1" GridPane.columnIndex="2" styleClass="form-field">
                            <Label text="Poste" styleClass="field-label"/>
                            <!-- Correction: ComboBox au lieu de TextField -->
                            <ComboBox fx:id="posteCombo" 
                                      promptText="SÃ©lectionner un poste" 
                                      prefWidth="200.0" 
                                      maxWidth="Infinity"
                                      styleClass="field-input" />
                        </VBox>

                        <!-- Row 3 -->
                        <VBox spacing="10" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="form-field">
                            <Label text="Adresse" styleClass="field-label"/>
                            <TextField fx:id="adresseField"
                                       promptText="Adresse complÃ¨te"
                                       styleClass="field-input"/>
                        </VBox>

                        <VBox spacing="10" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-field">
                            <Label text="Ville" styleClass="field-label"/>
                            <TextField fx:id="villeField"
                                       promptText="Ex: Tunis"
                                       styleClass="field-input"/>
                        </VBox>

                        <VBox spacing="10" alignment="BOTTOM_CENTER" GridPane.rowIndex="2" GridPane.columnIndex="2" styleClass="form-field">
                            <Region VBox.vgrow="ALWAYS"/>
                            <Button text="âœ“  Enregistrer" 
                                    fx:id="enregistrerButton"
                                    onAction="#handleEnregistrer"
                                    maxWidth="Infinity"
                                    styleClass="btn-primary"/>
                        </VBox>
                    </GridPane>
                </VBox>

                <!-- ========== TABLE CARD ========== -->
                <VBox spacing="22" styleClass="card table-card">
                    
                   <!-- Card Header -->
                    <HBox spacing="15" alignment="CENTER_LEFT" styleClass="card-header">
                        <StackPane styleClass="card-icon-container">
                            <Label text="ðŸ“‹" styleClass="card-icon"/>
                        </StackPane>
                        <VBox spacing="2" HBox.hgrow="ALWAYS">
                            <Label text="Liste des Utilisateurs" styleClass="card-title"/>
                            <Label text="GÃ©rez et consultez tous les utilisateurs du systÃ¨me" styleClass="card-subtitle"/>
                        </VBox>
                        <HBox spacing="10" alignment="CENTER_RIGHT">
                            <!-- Label compteur dynamique Ã  gÃ©rer dans le controller si besoin -->
                            <Label text="Utilisateurs" styleClass="table-count"/>
                        </HBox>
                    </HBox>

                    <Separator styleClass="card-separator"/>

                    <!-- Table -->
                    <!-- Barre de recherche -->
 <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 0 0 10 0;">
    <Label text="Rechercher :" styleClass="field-label"/>
    <TextField fx:id="searchField"
               promptText="Nom ou login..."
               styleClass="field-input"
               onKeyReleased="#handleSearch"/>
</HBox>

                    <TableView fx:id="usersTable" 
                               prefHeight="420"
                               styleClass="modern-table">
                        <columns>
                            <TableColumn fx:id="colLogin" text="Login" prefWidth="130" styleClass="col-login"/>
                            <TableColumn fx:id="colNomPrenom" text="Nom &amp; PrÃ©nom" prefWidth="150" styleClass="col-name"/>
                            <TableColumn fx:id="colPoste" text="Poste" prefWidth="100" styleClass="col-poste"/>
                            <TableColumn fx:id="colTel" text="TÃ©lÃ©phone" prefWidth="150" styleClass="col-tel"/>
                            <TableColumn fx:id="colDateEmbauche" text="Date Embauche" prefWidth="140" styleClass="col-date"/>
                            <TableColumn fx:id="colActions" text="Actions" prefWidth="400" styleClass="col-actions"/>
                        </columns>
                        <placeholder>
                            <VBox spacing="15" alignment="CENTER" style="-fx-padding: 40;">
                                <Label text="ðŸ“­" style="-fx-font-size: 48px; -fx-opacity: 0.3;"/>
                                <Label text="Aucun utilisateur trouvÃ©" styleClass="empty-message"/>
                                <Label text="Ajoutez votre premier utilisateur ci-dessus" styleClass="empty-hint"/>
                            </VBox>
                        </placeholder>
                    </TableView>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
